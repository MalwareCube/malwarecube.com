import React, { useState, useEffect } from 'react';

/*Import Video Components*/
import FeaturedVideo from '../videos/FeaturedVideo.jsx';
import VideoRow from '..//videos/VideoRow.jsx';

const Videos = () => {

/*YouTube API*/
const [data, setData] = useState(null);

useEffect(() => {
    const fetchData = async () => {
        try {
            const response = await fetch('https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=UCL9JdJc7mG8Q7EwUXkj001g&maxResults=5&order=date&type=video&key=AIzaSyBhKgUdCpYnHbUJoyuqYqa9D0Zwr916Ry8');
            if (!response.ok) {
                throw new Error('Network response error');
            }
            const jsonData = await response.json();
            setData(jsonData);
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    };

    fetchData();
}, []);

    return (
        <>
        <section className="video_section">
            
            {/*Featured Video*/}
            {data && data.items && data.items.length > 0 && (
                <FeaturedVideo
                    videoId={data.items[0].id.videoId}
                    publishedAt={data.items[0].snippet.publishedAt}
                    title={data.items[0].snippet.title}
                    description={data.items[0].snippet.description}
                />
            )}

            {/*Video Row*/}
            {data && data.items && data.items.length > 0 && (
                <VideoRow
                    data={data}
                />
            )}

            {/*Call to action button*/}
            <a className="cta" href="https://www.youtube.com/@MalwareCube" target="_blank" rel="noopener noreferrer">View all videos on YouTube</a>
        </section>
        
            {/* Styles */}
            <style>
                {`
                    .video_section {
                        padding: 40px 0px; /* Removed quotes from padding values */
                    }
                `}
            </style>
        </>
    );
}

export default Videos;